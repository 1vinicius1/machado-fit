<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2><i class="fa fa-users"></i> Gestão de Alunos</h2>
    <button
      class="btn btn-success"
      [routerLink]="['/personal/cadastrar-aluno']"
    >
      <i class="fa fa-plus"></i> Novo Aluno
    </button>
  </div>

  <nav class="navbar navbar-light bg-light">
    <form class="form-inline" (ngSubmit)="buscar()">
      <input
        class="form-control mr-sm-2"
        type="search"
        placeholder="Pesquisar"
        aria-label="Search"
        [(ngModel)]="termoBusca"
        name="busca"
      />
      <button class="btn btn-outline-success my-2 my-sm-0 mr-2" type="submit">
        Buscar
      </button>
      <button
        class="btn btn-outline-secondary my-2 my-sm-0"
        type="button"
        (click)="limparBusca()"
      >
        Limpar
      </button>
    </form>
  </nav>

  <div *ngIf="loading" class="text-center mt-5">
    <i class="fa fa-spinner fa-spin fa-3x"></i>
    <p>Carregando...</p>
  </div>

  <div class="table-responsive" *ngIf="!loading">
    <table class="table table-hover table-bordered bg-white shadow-sm">
      <thead class="thead-light">
        <tr>
          <th>Nome</th>
          <th>CPF</th>
          <th>Nascimento</th>
          <th class="text-center" style="width: 250px"></th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let aluno of alunosPaginados">
          <td>{{ aluno.nome }}</td>
          <td>{{ aluno.cpf }}</td>
          <td>{{ aluno.dataNascimento | date: "dd/MM/yyyy" }}</td>
          <td class="text-center">
            <button
              class="btn btn-info btn-sm mr-1"
              [routerLink]="['aluno/meus-treinos']"
              title="Gerenciar Treinos"
            >
              <i class="fa fa-th" aria-hidden="true"></i>
            </button>
            <button
              class="btn btn-warning btn-sm mr-1"
              [routerLink]="['/personal/editar-aluno', aluno.id]"
              title="Editar Dados"
            >
              <i class="fa fa-pencil"></i>
            </button>

            <button
              class="btn btn-danger btn-sm"
              (click)="inativar(aluno.id)"
              title="Excluir"
            >
              <i class="fa fa-trash"></i>
            </button>
            
          </td>
        </tr>
        <tr *ngIf="alunosFiltrados.length === 0">
          <td colspan="4" class="text-center text-muted">
            Nenhum aluno cadastrado.
          </td>
        </tr>
      </tbody>
    </table>

    <nav aria-label="Page navigation example">
      <ul class="pagination justify-content-end">
        <li class="page-item" [ngClass]="{ disabled: paginaAtual === 1 }">
          <a class="page-link" href="javascript:void(0)" (click)="paginaAnterior()">Anterior</a>
        </li>
        <li
          class="page-item"
          *ngFor="let pagina of [].constructor(paginasTotal); let i = index"
          [ngClass]="{ active: paginaAtual === i + 1 }"
        >
          <a class="page-link" href="javascript:void(0)" (click)="irParaPagina(i + 1)">
            {{ i + 1 }}
          </a>
        </li>
        <li class="page-item" [ngClass]="{ disabled: paginaAtual === paginasTotal }">
          <a class="page-link" href="javascript:void(0)" (click)="proximaPagina()">Próximo</a>
        </li>
      </ul>
    </nav>
  </div>
</div>
