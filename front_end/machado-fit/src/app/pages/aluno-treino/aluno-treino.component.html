<div class="container mt-4">
  <h2 class="mb-4">
    <i class="fa fa-calendar-check-o"></i> Meus Treinos da Semana
  </h2>

  <div *ngIf="loading" class="text-center mt-5">
    <i class="fa fa-spinner fa-spin fa-3x"></i>
  </div>

  <div *ngIf="!loading && !temTreinos" class="alert alert-warning">
    Você ainda não possui treinos cadastrados. Fale com seu personal!
  </div>

  <div
    *ngFor="let grupo of treinosAgrupados | keyvalue"
    class="card mb-4 shadow-sm"
  >
    <div
      class="card-header bg-dark text-white d-flex justify-content-between align-items-center"
    >
      <div>
        <h5 class="mb-0">{{ grupo.value[0].nomeTreino }}</h5>
        <small class="badge badge-warning">{{
          grupo.value[0].diaSemana
        }}</small>
      </div>

      <button
        class="btn btn-success"
        [disabled]="!todosConcluidos(grupo.value)"
        (click)="finalizarTreino(grupo.value[0].idTreino)"
      >
        <i class="fa fa-check"></i> Finalizar Treino
      </button>
    </div>

    <ul class="list-group list-group-flush">
      <li
        *ngFor="let ex of grupo.value; let i = index"
        class="list-group-item d-flex justify-content-between align-items-center"
      >
        <div class="col-9">
          <h6 class="mb-1 text-primary">{{ ex.nomeExercicio }}</h6>
          <p class="mb-1 text-muted small">
            <strong>Séries/Reps:</strong> {{ ex.repeticoes }} <br />
            <strong>Carga:</strong> {{ ex.carga }} <br />
            <span *ngIf="ex.observacoes"
              ><strong>Obs:</strong> {{ ex.observacoes }}</span
            >
          </p>
        </div>

        <div class="col-3 text-right">
          <div class="custom-control custom-checkbox">
            <input
              type="checkbox"
              class="custom-control-input"
              [id]="'check_' + ex.idTreino + '_' + i"
              [(ngModel)]="ex.concluido"
            />
            <label
              class="custom-control-label cursor-pointer"
              [for]="'check_' + ex.idTreino + '_' + i"
            >
              Feito
            </label>
          </div>
        </div>
      </li>
    </ul>
  </div>
</div>
